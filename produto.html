<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhes do Produto - ecobuy</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  
    <!-- Banner de frete com slider -->    
    <div class="shipping-banner">        
      <div class="container">            
          <div class="info-slider">                
              <div class="info-slide">                    
                  <p><i class="fa-solid fa-truck-fast"></i> Frete grátis para compras acima de R$ 150,00. <a href="javascript:void(0)">Saiba mais</a></p>                
              </div>                
              <div class="info-slide">                    
                  <p><i class="fa-solid fa-map-location-dot"></i> FRETE GRÁTIS para Regiões Sul e Sudeste: compras acima de R$399,90 | <a href="javascript:void(0)">Confira as regras</a></p>                
              </div>                
              <div class="info-slide">                    
                  <p><i class="fa-solid fa-tags"></i> PAGUE COM PIX E TENHA +5% OFF* em compras acima de R$150,00 | <a href="javascript:void(0)">Consulte as condições</a></p>                
              </div>                
              <div class="info-slide">                    
                  <p><i class="fa-solid fa-rotate-left"></i> COMUNICADO: Trocas e Devoluções | <a href="javascript:void(0)">Saiba mais</a></p>                
              </div>            
          </div>        
      </div>    
  </div>

  <!-- Header completo -->
  <header class="header">
    <div class="header-container">
      <button aria-label="Botão" class="menu-button mobile-only">
        <i class="fa-solid fa-bars"></i>
      </button>
      <a class="logo" href="index.html">
        <img src="./assets/img/Logo.svg" alt="Logo da Ecobuy">
      </a>
      <nav class="desktop-nav">
        <ul class="nav-menu">
          <li><a class="nav-link" href="index.html">Home</a></li>
          <li><a class="nav-link" href="sobre.html">Sobre nós</a></li>
          <li class="dropdown">
            <a class="nav-link" href="produtos.html">Produtos <i class="fa-solid fa-chevron-down"></i></a>
            <div class="dropdown-content">
              <a href="produtos.html?categoria=skincare">Skincare</a>
              <a href="produtos.html?categoria=corpo">Corpo e Banho</a>
              <a href="produtos.html?categoria=cabelo">Cabelos</a>
              <a href="produtos.html?categoria=rosto">Rosto</a>
              <a href="produtos.html?categoria=maquiagem">Maquiagem Natural</a>
              <a href="produtos.html?categoria=kits">Kits e Presentes</a>
              <a href="produtos.html?categoria=casa">Casa Sustentável</a>
              <a href="produtos.html?categoria=perfumaria">Perfumaria</a>
              <a href="produtos.html?categoria=vegano">Vegano</a>
              <a href="produtos.html?categoria=organico">Orgânico</a>
            </div>
          </li>
          <li><a class="nav-link" href="parceiros.html">Parceiros</a></li>
          <li><a class="nav-link" href="contato.html">Contato</a></li>
        </ul>
      </nav>
      <div class="header-icons">
        <a class="icon-link" href="javascript:void(0)">
          <i class="fa-solid fa-heart"></i>
        </a>
        <a class="icon-link cart-icon" href="cart.html">
          <i class="fa-solid fa-cart-shopping"></i>
          <span class="cart-count">0</span>
        </a>
      </div>
    </div>
    <div class="search-container">
      <div class="search-box">
        <input placeholder="O que você está procurando?" type="text" />
        <button aria-label="Botão" class="search-button">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </div>
    </div>
  </header>
  <!-- Cupom banner -->
  <div class="coupon-banner">
    <div class="container">
      <p>Use o cupom <strong>ECO</strong> e ganhe 3% OFF em sua compra!</p>
    </div>
  </div>
  <main class="container">
    <div class="content-page" style="margin-top: 30px;">
      <button onclick="window.history.back()" class="btn btn-outline-green" style="margin-bottom: 20px;">&larr;
        Voltar</button>
      <div class="breadcrumbs"><a href="index.html">Home</a> &gt; <a href="produtos.html">Produtos</a> &gt; <span
          id="breadcrumb-product-name"></span></div>
      <div class="product-detail-grid" style="display: flex; gap: 40px; flex-wrap: wrap; align-items: flex-start;">
        <div class="product-detail-image"
          style="flex:1; min-width: 320px; background:#f5f5f5; border-radius:12px; padding:24px; display:flex; align-items:center; justify-content:center;">
          <img id="main-product-image" src="" alt=""
            style="width:100%; max-width:340px; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,0.04);">
        </div>
        <div class="product-detail-info" style="flex:2; min-width: 320px;">
          <h1 id="product-title" style="font-size:2rem; color:var(--verde); margin-bottom:10px;"></h1>
          <div class="product-price" style="font-size:1.5rem; font-weight:700; color:var(--verde); margin-bottom:8px;">
            <span class="current-price" id="product-price"></span>
            <span class="original-price" id="product-original-price"
              style="display:none; margin-left:10px; color:#999; text-decoration:line-through; font-size:1.1rem;"></span>
            <span class="discount-badge" id="discount-badge" style="display:none; margin-left:10px;"></span>
          </div>
          <div class="product-rating" id="product-rating" style="margin-bottom:8px;"></div>
          <div class="installment-info" id="installment-info" style="margin-bottom:8px;"></div>
          <div class="stock-info" id="stock-info" style="margin-bottom:8px;"></div>
          <div class="product-tags" id="product-tags" style="margin-bottom:8px;"></div>
          <p class="product-description" id="product-description" style="margin-bottom:18px;"></p>
          <div style="display:flex; gap:12px; flex-wrap:wrap;">
            <button class="btn btn-add-cart-large" id="add-to-cart-btn" style="flex:1; min-width:180px;">Adicionar ao
              carrinho</button>
            <button class="btn btn-wishlist-large" id="add-to-wishlist-btn" style="flex:1; min-width:180px;">❤ Adicionar
              aos favoritos</button>
          </div>
        </div>
      </div>
      <hr style="margin:40px 0 30px 0; border:none; border-top:1px solid #eee;">
      <section class="ratings-section">
        <h2 style="font-size:1.3rem; margin-bottom:18px;">Avaliações dos clientes</h2>
        <div id="reviews-list"></div>
        <div class="write-review" style="margin-top:30px;">
          <h3>Deixe sua avaliação</h3>
          <form id="review-form">
            <div class="rating-input">
              <label for="review-rating">Nota:</label>
              <div id="star-rating" style="display:flex; gap:4px; cursor:pointer;">
                <!-- Estrelas serão renderizadas via JS -->
              </div>
              <input type="hidden" id="review-rating" value="5" required />
            </div>
            <div class="form-group">
              <label for="review-text">Comentário:</label>
              <textarea id="review-text" required maxlength="300"
                placeholder="Conte como foi sua experiência..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Enviar avaliação</button>
          </form>
        </div>
      </section>
    </div>
  </main>
  <footer class="footer">
    <div class="container">
      <div class="newsletter-box">
        <h3>Receba nossas novidades</h3>
        <p>Cadastre-se para receber ofertas exclusivas e dicas de sustentabilidade</p>
        <form class="newsletter-form">
          <input placeholder="Seu e-mail" type="email" />
          <button class="btn btn-primary" type="submit">Cadastrar</button>
        </form>
      </div>
      <div class="social-media">
        <h3>Siga-nos nas redes sociais</h3>
        <div class="social-icons">
          <a class="social-icon" href="javascript:void(0)">
            <i class="fa-brands fa-facebook-f"></i>
          </a>
          <a class="social-icon" href="javascript:void(0)">
            <i class="fa-brands fa-instagram"></i>
          </a>
          <a class="social-icon" href="javascript:void(0)">
            <i class="fa-brands fa-twitter"></i>
          </a>
          <a class="social-icon" href="javascript:void(0)">
            <i class="fa-brands fa-youtube"></i>
          </a>
        </div>
      </div>
      <div class="footer-links">
        <div class="footer-column">
          <h3>Institucional</h3>
          <a href="sobre.html">Sobre nós</a>
          <a href="javascript:void(0)">Sustentabilidade</a>
          <a href="javascript:void(0)">Trabalhe conosco</a>
          <a href="javascript:void(0)">Termos de uso</a>
          <a href="javascript:void(0)">Política de privacidade</a>
        </div>
        <div class="footer-column">
          <h3>Ajuda</h3>
          <a href="contato.html">Central de atendimento</a>
          <a href="javascript:void(0)">Como comprar</a>
          <a href="javascript:void(0)">Prazos de entrega</a>
          <a href="javascript:void(0)">Trocas e devoluções</a>
          <a href="javascript:void(0)">Pagamentos</a>
        </div>
        <div class="footer-column">
          <h3>Minha conta</h3>
          <a href="javascript:void(0)">Meus pedidos</a>
          <a href="javascript:void(0)">Meus dados</a>
          <a href="javascript:void(0)">Minhas avaliações</a>
          <a href="javascript:void(0)">Favoritos</a>
        </div>
      </div>
      <div class="copyright">
        <p>© 2025 Ecobuy - Todos os direitos reservados</p>
      </div>
    </div>
  </footer>
  <script src="assets/js/scripts.js"></script>
  <script>
    // Carregar detalhes do produto ao abrir a página
    document.addEventListener('DOMContentLoaded', function () {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id');
      if (!productId || !window.productsDatabase || !window.productsDatabase[productId]) {
        document.getElementById('product-detail-view').innerHTML = '<h2>Produto não encontrado.</h2>';
        return;
      }
      const product = window.productsDatabase[productId];
      document.getElementById('main-product-image').src = product.image;
      document.getElementById('main-product-image').alt = product.name;
      document.getElementById('product-title').textContent = product.name;
      document.getElementById('breadcrumb-product-name').textContent = product.name;
      document.getElementById('product-price').textContent = 'R$ ' + product.price.toFixed(2).replace('.', ',');
      if (product.originalPrice) {
        document.getElementById('product-original-price').textContent = 'R$ ' + product.originalPrice.toFixed(2).replace('.', ',');
        document.getElementById('product-original-price').style.display = 'inline';
        // Badge de desconto
        const discount = Math.round(100 - (product.price / product.originalPrice * 100));
        document.getElementById('discount-badge').textContent = `-${discount}%`;
        document.getElementById('discount-badge').style.display = 'inline-block';
      }
      document.getElementById('product-description').textContent = product.description;
      // Tags
      const tagsContainer = document.getElementById('product-tags');
      tagsContainer.innerHTML = '';
      if (product.tags) {
        product.tags.forEach(tag => {
          const tagEl = document.createElement('span');
          tagEl.className = 'tag';
          tagEl.textContent = tag;
          tagsContainer.appendChild(tagEl);
        });
      }
      // Estoque
      const stockInfo = document.getElementById('stock-info');
      if (product.stock > 10) {
        stockInfo.innerHTML = '<span class="in-stock">Em estoque</span>';
      } else if (product.stock > 0) {
        stockInfo.innerHTML = `<span class="low-stock">Apenas ${product.stock} em estoque</span>`;
      } else {
        stockInfo.innerHTML = '<span class="out-of-stock">Fora de estoque</span>';
      }
      // Avaliação
      const ratingContainer = document.getElementById('product-rating');
      if (product.rating) {
        ratingContainer.innerHTML = `${generateStarRating(product.rating)} <span class="rating-value">${product.rating.toFixed(1)}</span>`;
      }
      // Parcelamento
      const installmentInfo = document.getElementById('installment-info');
      if (installmentInfo && product.price) {
        const installmentValue = (product.price / 2).toFixed(2).replace('.', ',');
        installmentInfo.textContent = `2 x de R$ ${installmentValue}`;
      }
      // Botão adicionar ao carrinho
      document.getElementById('add-to-cart-btn').addEventListener('click', function () {
        addToCart(product.id);
      });
      // Botão favoritos
      const wishlistBtn = document.getElementById('add-to-wishlist-btn');
      function updateWishlistBtn() {
        const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
        if (wishlist.includes(product.id)) {
          wishlistBtn.classList.add('active');
          wishlistBtn.textContent = '❤️ Remover dos favoritos';
        } else {
          wishlistBtn.classList.remove('active');
          wishlistBtn.textContent = '❤ Adicionar aos favoritos';
        }
      }
      wishlistBtn.addEventListener('click', function () {
        toggleWishlist(product.id);
        updateWishlistBtn();
      });
      updateWishlistBtn();

      // Mock de avaliações
      const reviews = [
        { nome: 'Ana', nota: 5, texto: 'Produto maravilhoso, entrega rápida e embalagem sustentável!' },
        { nome: 'Carlos', nota: 4, texto: 'Gostei bastante, só achei o cheiro um pouco forte.' },
        { nome: 'Juliana', nota: 5, texto: 'Superou minhas expectativas, recomendo muito!' },
        { nome: 'Rafael', nota: 3, texto: 'Produto bom, mas poderia ser mais barato.' }
      ];
      const reviewsList = document.getElementById('reviews-list');
      reviewsList.innerHTML = '';
      reviews.forEach(r => {
        const reviewDiv = document.createElement('div');
        reviewDiv.className = 'review';
        reviewDiv.innerHTML = `<div class="review-header"><span class="reviewer-name">${r.nome}</span> <span class="review-rating">${generateStarRating(r.nota)}</span></div><div class="review-text">${r.texto}</div>`;
        reviewsList.appendChild(reviewDiv);
      });
      // Estrelas de avaliação interativas
      function renderStarRatingInput() {
        const starContainer = document.getElementById('star-rating');
        if (!starContainer) return;
        let current = 5;
        const input = document.getElementById('review-rating');
        function updateStars() {
          starContainer.innerHTML = '';
          for (let i = 1; i <= 5; i++) {
            const star = document.createElement('span');
            star.innerHTML = `<i class="fa-${i <= current ? 'solid' : 'regular'} fa-star" style="color:#ffc107;"></i>`;
            star.style.cursor = 'pointer';
            star.addEventListener('click', () => {
              current = i;
              input.value = i;
              updateStars();
            });
            starContainer.appendChild(star);
          }
        }
        updateStars();
      }
      renderStarRatingInput();
      // Formulário de avaliação (mock)
      document.getElementById('review-form').addEventListener('submit', function (e) {
        e.preventDefault();
        const nome = 'Você';
        const nota = Number(document.getElementById('review-rating').value);
        const texto = document.getElementById('review-text').value;
        const reviewDiv = document.createElement('div');
        reviewDiv.className = 'review';
        reviewDiv.innerHTML = `<div class="review-header"><span class="reviewer-name">${nome}</span> <span class="review-rating">${generateStarRating(nota)}</span></div><div class="review-text">${texto}</div>`;
        reviewsList.prepend(reviewDiv);
        this.reset();
        showNotification('Avaliação enviada!');
      });
    });
  </script>
</body>

</html>